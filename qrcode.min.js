
!function(o){function t(o){this.mode=s.MODE_8BIT_BYTE,this.data=o}function e(o,t){this.totalCount=o,this.dataCount=t}function r(o,t){if(void 0===o.length)throw new Error(o.length+"/"+t);for(var e=0;e<o.length&&0!==o[e];)e++;this.numDataCodewords=t,this.numTotalCodewords=o.length,this.dataCodewords=[];for(var r=0;r<t;r++)this.dataCodewords.push(o[r])}function n(o,t){this.typeNumber=o,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var s={PAD0:236,PAD1:17,MODE_8BIT_BYTE:4};t.prototype={getLength:function(o){return this.data.length},write:function(o){for(var t=0;t<this.data.length;t++){var e=this.data.charCodeAt(t);e>255&&console.warn("bytes larger than 255 are not supported");for(var r=0;r<8;r++)o.putBit(1==(e>>>7-r&1))}}},QRCode=function(o,t){this._el=document.getElementById(o),this._htOption=t||{},this._oQRCode=null,this._oDrawing=null,this._bIsPainted=!1,this._elImage=null,this._oQRCode=new n(4,"L"),this._oQRCode.addData(this._htOption.text),this._oQRCode.make(),this._oDrawing=document.createElement("canvas"),this._el.appendChild(this._oDrawing),this._bIsPainted=!0,this._oQRCode.renderTo2dContext(this._oDrawing.getContext("2d"),this._htOption.width||128,this._htOption.height||128)};QRCode.prototype.clear=function(){this._el.innerHTML="",this._bIsPainted=!1},n.prototype={addData:function(o){this.dataList.push(new t(o)),this.dataCache=null},isDark:function(o,t){if(0>o||this.moduleCount<=o||0>t||this.moduleCount<=t)throw new Error(o+","+t);return this.modules[o][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(o,t){this.moduleCount=21,this.modules=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++){this.modules[e]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[e][r]=null}for(var n=this.setupPositionProbePattern(0,0),s=this.setupPositionProbePattern(this.moduleCount-7,0),i=this.setupPositionProbePattern(0,this.moduleCount-7),a=this.setupTimingPattern(),u=this.setupTypeInfo(o,t),d=this.createData(this.typeNumber,this.errorCorrectLevel,this.dataList),f=0,h=0;h<this.moduleCount;h++)for(var l=h%2==0,c=this.moduleCount-1;l?c>=0:c<this.moduleCount;)if(null==this.modules[c][h]){var m=d[f++];this.modules[c][h]=1==((255&m)>>>7)}},createData:function(o,t,e){var r=[];for(var n=0;n<e.length;n++)r.push(e[n]);return r},getBestMaskPattern:function(){return 0},setupPositionProbePattern:function(o,t){for(var e=-1;7>=e;e++)if(!(o+e<=-1||this.moduleCount<=o+e))for(var r=-1;7>=r;r++)!(t+r<=-1||this.moduleCount<=t+r)&&this.modules[o+e][t+r]==null&&(this.modules[o+e][t+r]=e>=0&&e<=6&&(0==r||6==r)||r>=0&&r<=6&&(0==e||6==e)||e>=2&&e<=4&&r>=2&&r<=4?!0:!1)},setupTimingPattern:function(){for(var o=8;o<this.moduleCount-8;o++)null==this.modules[o][6]&&(this.modules[o][6]=o%2==0),null==this.modules[6][o]&&(this.modules[6][o]=o%2==0)},setupTypeInfo:function(o,t){for(var e=0;e<8;e++)null==this.modules[8][e]&&(this.modules[8][e]=e%2==0),null==this.modules[e][8]&&(this.modules[e][8]=e%2==0)}},"undefined"!=typeof module&&(module.exports=QRCode);
